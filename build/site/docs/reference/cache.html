<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cache :: reverie // documentation</title>
    <link rel="canonical" href="https://docs.reveriecms.com/docs/reference/cache.html">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../static/css/site.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-44261433-3"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-44261433-3')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.reveriecms.com">reverie // documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Intro</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../structure.html">Structure of a project</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">dev</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/reverie-dev.html">reverie-dev</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/migrations.html">migrations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/app.html">app</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/module.html">module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/object.html">object</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../dev/page.html">page</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Concepts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/templates.html">Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/areas.html">Areas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/objects.html">Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/apps.html">Apps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/endpoints.html">Endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../concepts/migrations.html">Migrations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="app.html">app</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="area.html">area</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="auth.html">auth</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="cache.html">cache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="downstream.html">downstream</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="email.html">email</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="endpoint.html">endpoint</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="fields.html">fields</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http-server.html">http/server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logger.html">logger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration.html">migration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="module.html">module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="object.html">object</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="page.html">page</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="renderer.html">renderer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="route.html">route</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="system.html">system</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">docs</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">docs</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">docs</a></li>
    <li>Reference</li>
    <li><a href="cache.html">cache</a></li>
  </ul>
</nav>
Version 
</div>
<article class="doc">
<h1 class="page">Cache</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Caching in reverie is supported through a flexible caching system. Currently some hits to the database will always occur and this is a tradeoff taken so that caching can be done on a per user basis.</p>
</div>
<div class="paragraph">
<p>Any part of the cache system can be replaced with custom implementations to cover for specific needs should they arise.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_protocols"><a class="anchor" href="#_protocols"></a>protocols</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The cache manager is implemented through four protocols. They are in order</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ICacheStore</p>
</li>
<li>
<p>ICacheManager</p>
</li>
<li>
<p>IPruneStrategy</p>
</li>
<li>
<p>ICacheKeyStrategy</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_cache_store"><a class="anchor" href="#_cache_store"></a>cache store</h3>
<div class="paragraph">
<p>Default implementation is given in reverie.cache. Options holds the request object in the default implementation of the cache manager. Intent is to be able to pass along data that is of interest to the cache store for more advanced implementations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>read-cache [store options key]</p>
</li>
<li>
<p>write-cache [store options key data]</p>
</li>
<li>
<p>delete-cache [store options key]</p>
</li>
<li>
<p>clear cache [store]</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_cache_manager"><a class="anchor" href="#_cache_manager"></a>cache manager</h3>
<div class="paragraph">
<p>Default implementation is given in reverie.cache. Keeps track of variations of cached pages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cache! [manager page request] [manager page rendered request]</p>
</li>
<li>
<p>evict! [manager page]</p>
</li>
<li>
<p>clear! [manager]</p>
</li>
<li>
<p>lookup [manager page request]</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prune_strategy"><a class="anchor" href="#_prune_strategy"></a>prune strategy</h3>
<div class="paragraph">
<p>Default implementation is given in reverie.cache.sql. Will run over all pages that have a time based pruning strategy and clear the cache for those pages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>prune! [strategy cachemananger]</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_cache_key_strategy"><a class="anchor" href="#_cache_key_strategy"></a>cache key strategy</h3>
<div class="paragraph">
<p>Default implementation is given in reverie.cache. Will create a hash key based on serial of the page, uri of the request, query string of the request and optionally the logged in user id and a supplied function (only an option for defpage and defapp).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>get-hash-key [cache-key-strategy page request]</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
        <img src="/static/img/reveriecms-logo-white.png">
        <p><a href="http://reveriecms.com">reveriecms.com</a></p>
        <p><a href="https://github.com/emil0r/reverie">GitHub</a></p>
</footer>
<script src="../../static/js/site.js"></script>
<script async src="../../static/js/vendor/highlight.js"></script>
  </body>
</html>
